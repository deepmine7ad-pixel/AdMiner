<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ðŸŽ° Casino</title>
<style>
body{background:#000;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial;padding:18px;max-width:900px;margin:auto;text-align:center}
button,input,select{padding:10px 14px;margin:6px;border-radius:8px;border:1px solid #333;background:#111;color:#0f0;font-weight:bold;cursor:pointer}
button:hover{background:#0f0;color:#000;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
nav button{background:#111;color:#0f0;border:1px solid #0f0;}
nav button.active{background:#0f0;color:#000;}
h1{margin:0 0 12px 0;}
.small{color:#aaa;font-size:0.9rem}
#gameArea{margin-top:20px}
.result{font-weight:bold;margin-top:12px}
</style>
</head>
<body>
<header>
  <h1>ðŸŽ° Casino</h1>
  <a href="wallet.html" style="color:#0f0;">ðŸ’½ Wallet</a>
</header>

<nav>
  <button id="upgradeTab" class="active">Upgrade</button>
  <button id="rouletteTab">Roulette</button>
</nav>

<p>Balance: ðŸ“€ <strong id="balance">0.000000</strong></p>

<div id="gameArea"></div>

<script>
// ensure wallet exists
if(!localStorage.device_id)localStorage.device_id='dev-'+Math.random().toString(36).slice(2,11);
if(!localStorage.wallet_balance)localStorage.wallet_balance='0';

// one-time 9.0 AdAu gift
if(!localStorage.initial_casino_reward){
  let bal=parseFloat(localStorage.wallet_balance||0);
  bal+=9.0;
  localStorage.wallet_balance=bal;
  localStorage.initial_casino_reward='1';
}

function updateBalanceDisplay(){
  document.getElementById('balance').textContent=parseFloat(localStorage.wallet_balance||0).toFixed(6);
}
updateBalanceDisplay();

// --- Tabs ---
const area=document.getElementById('gameArea');
document.getElementById('upgradeTab').onclick=()=>{showUpgrade();setActive('upgradeTab');}
document.getElementById('rouletteTab').onclick=()=>{showRoulette();setActive('rouletteTab');}

function setActive(id){
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// --- Upgrade (CSGO-style) ---
function showUpgrade(){
  area.innerHTML=`
    <h2>ðŸ”§ Upgrade</h2>
    <p class="small">Try to multiply your AdAu. 40% chance to double your bet!</p>
    <input id="bet" type="number" step="0.001" min="0.01" placeholder="Bet (min 0.01)">
    <button id="upgradeBtn">Upgrade</button>
    <div class="result" id="result"></div>`;
  document.getElementById('upgradeBtn').onclick=()=>{
    let bet=parseFloat(document.getElementById('bet').value);
    if(isNaN(bet)||bet<0.01){alert('Minimum bet 0.01');return;}
    let bal=parseFloat(localStorage.wallet_balance||0);
    if(bet>bal){alert('Not enough balance!');return;}
    const win=Math.random()<0.4; // 40% chance to win
    if(win){
      bal+=bet;
      document.getElementById('result').textContent=`You won +${bet.toFixed(3)} ðŸ“€`;
    } else {
      bal-=bet;
      document.getElementById('result').textContent=`You lost -${bet.toFixed(3)} ðŸ“€`;
    }
    localStorage.wallet_balance=bal;
    updateBalanceDisplay();
  };
}
showUpgrade();

// --- Roulette ---
function showRoulette(){
  area.innerHTML=`
    <h2>Roulette</h2>
    <p class="small">Win 1/8 of your bet if you guess the chamber right! Choose color (red/black) or number (0â€“7).</p>
    <input id="betRoulette" type="number" step="0.001" min="0.01" placeholder="Bet (min 0.01)">
    <div>
      <select id="color">
        <option value="">-- Choose Color --</option>
        <option value="red">Red</option>
        <option value="black">Black</option>
      </select>
      <select id="number">
        <option value="">-- Choose Number --</option>
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
      </select>
    </div>
    <button id="playRoulette">Play</button>
    <div class="result" id="resultRoulette"></div>`;
  document.getElementById('playRoulette').onclick=()=>{
    let bet=parseFloat(document.getElementById('betRoulette').value);
    if(isNaN(bet)||bet<0.01){alert('Minimum bet 0.01');return;}
    let bal=parseFloat(localStorage.wallet_balance||0);
    if(bet>bal){alert('Not enough balance!');return;}
    const colorSel=document.getElementById('color').value;
    const numSel=document.getElementById('number').value;
    const chamber=Math.floor(Math.random()*8); // 0-7
    const chamberColor = (chamber%2==0)?'red':'black';
    let resultText=`Chamber: ${chamber} (${chamberColor}) â€” `;
    let won=false;
    if(numSel!=='' && parseInt(numSel)==chamber)won=true;
    else if(colorSel!=='' && colorSel==chamberColor)won=true;

    if(won){
      const winAmount=bet/8;
      bal+=winAmount;
      resultText+=`You survived! +${winAmount.toFixed(4)} ðŸ“€`;
    }else{
      bal-=bet;
      resultText+=`Bang! You lost -${bet.toFixed(4)} ðŸ“€`;
    }
    localStorage.wallet_balance=bal;
    document.getElementById('resultRoulette').textContent=resultText;
    updateBalanceDisplay();
  };
}
</script>
</body>
</html>
